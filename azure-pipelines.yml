variables:
  buildConfiguration: 'Release'

jobs:
- job: Build
  pool:
    vmImage: ubuntu-22.04
  steps:
  - task: UseDotNet@2
    displayName: Install .NET 7
    inputs:
      version: 7.x

  - task: DotNetCoreCLI@2
    displayName: Restore Packages
    inputs:
      command: restore
      projects: src/Pootis-Bot.sln

  - task: DotNetCoreCLI@2
    displayName: Build Project
    inputs:
      command: publish
      projects: src/Pootis-Bot.sln
      arguments: '--no-restore -c $(buildConfiguration)'

  - task: PublishPipelineArtifact@1
    displayName: Upload Artifact
    inputs:
      targetPath: src/bin/Release/publish
      artifactName: $(Build.DefinitionName)-$(Agent.JobName)-$(Build.BuildNumber)-$(Build.SourceBranchName)
